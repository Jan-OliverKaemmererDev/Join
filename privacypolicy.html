<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./styles/privacypolicy.css" />
    <title>Join - Privacy Policy</title>
  </head>
  <body onload="initPrivacyPolicy()">
    <nav class="sidebar">
      <img src="./assets/main-page/join-logo-white.svg" alt="Join Logo" />

      <!-- Container for dynamic navigation content -->
      <div
        id="nav-content"
      >
        <!-- Default: Full Navigation (will be hidden if logged out) -->
        <div class="nav-links">
          <a href="summaryuser.html">
            <img src="./assets/summary-page/summary-icon.svg" alt="" />
            Summary
          </a>
          <a href="addtask.html">
            <img src="./assets/summary-page/add-task-icon.svg" alt="" />
            Add Task
          </a>
          <a href="board.html">
            <img src="./assets/summary-page/board-icon.svg" alt="" />
            Board
          </a>
          <a href="contacts.html">
            <img src="./assets/summary-page/contacts-icon.svg" alt="" />
            Contacts
          </a>
        </div>
        <div class="legal-links">
          <a
            href="privacypolicy.html"
            class="active privacy-policy-link"
            >Privacy Policy</a
          >
          <a href="legalnotice.html">Legal notice</a>
        </div>
      </div>
    </nav>

    <main class="main-content">
      <header class="dashboard-header">
        <span>Kanban Project Management Tool</span>
        <div class="header-icons" id="header-icons">
          <a href="help.html" class="help-link">
            <img src="./assets/summary-page/help.svg" alt="Help" />
          </a>
          <div class="user-menu-container">
            <div
              class="user-initials"
              id="user-initials"
              onclick="toggleUserMenu()"
            >
              G
            </div>
            <div class="user-dropdown" id="user-dropdown">
              <a href="legalnotice.html">Legal Notice</a>
              <a href="privacypolicy.html">Privacy Policy</a>
              <a href="#" onclick="handleLogout(); return false;">Log out</a>
            </div>
          </div>
        </div>
      </header>

      <section class="privacy-policy-container">
        <h1>Privacy Policy</h1>

        <h2>Subtitle</h2>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque
          odio felis, iaculis ut massa eget, ornare lacinia urna. In dignissim
          justo eu velit sagittis, in scelerisque nulla convallis. Vestibulum
          eros lorem, sollicitudin eget eros non, varius aliquam mauris. Sed
          turpis ipsum, condimentum quis nulla at, lobortis facilisis ipsum.
          Nunc erat justo, hendrerit vel enim vitae, feugiat mattis dui. In
          auctor dignissim luctus. Mauris ornare ipsum at ultrices eleifend.
          Praesent tempus congue magna. Quisque libero erat, pharetra a neque
          et, imperdiet semper justo.
        </p>

        <h2>Subtitle</h2>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque
          odio felis, iaculis ut massa eget, ornare lacinia urna. In dignissim
          justo eu velit sagittis, in scelerisque nulla convallis. Vestibulum
          eros lorem, sollicitudin eget eros non, varius aliquam mauris. Sed
          turpis ipsum, condimentum quis nulla at, lobortis facilisis ipsum.
          Nunc erat justo, hendrerit vel enim vitae, feugiat mattis dui. In
          auctor dignissim luctus. Mauris ornare ipsum at ultrices eleifend.
          Praesent tempus congue magna. Quisque libero erat, pharetra a neque
          et, imperdiet semper justo.
        </p>

        <!-- Add more content as needed to match the look -->
      </section>
    </main>

    <script src="./scripts/auth.js"></script>
    <script src="./scripts/side-menu.js"></script>
    <script>
      function initPrivacyPolicy() {
        const urlParams = new URLSearchParams(window.location.search);
        const isPublic = urlParams.get("public") === "true";

        const currentUser = getCurrentUser();
        const navContent = document.getElementById("nav-content");
        const headerIcons = document.getElementById("header-icons");

        // If explicit public mode OR no user logged in
        if (isPublic || !currentUser) {
          // Remove standard nav links and show Back Arrow
          navContent.innerHTML = `
                    <div class="nav-links">
                        <a href="index.html">
                            <img src="./assets/privacy-policy-page/back-to-login.svg" alt="Log In" class="back-arrow-icon">
                            Log In
                        </a>
                    </div>
                `;

          // Hide header icons
          if (headerIcons) headerIcons.style.display = "none";
        } else {
          // User IS logged in and not in public mode
          if (currentUser.isGuest) {
            displayGuestInitials();
          } else {
            displayUserInitials(currentUser.name);
          }
        }
      }
    </script>
    <script src="./scripts/auth.js"></script>
    <script src="./scripts/utils.js"></script>
    <script src="./scripts/user-menu.js"></script>
  </body>
</html>
